<!DOCTYPE html>
<html>
  <head>
        <!-- HTML5 shim for IE6-8 support of new elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--link rel="stylesheet" href="/fonts/junction-regular-fontfacekit/stylesheet.css" />
    <link rel="stylesheet" href="/fonts/League-Gothic-fontfacekit/stylesheet.css" />
    <link rel="stylesheet" href="/fonts/M-1m-fontfacekit/stylesheet.css" / -->
    <!-- link rel="stylesheet" href="/css/reset.css" />
    <link rel="stylesheet" href="/css/main.css" />
    <link rel="stylesheet" href="/css/pygments-native.css" /-->
    <link rel="stylesheet" href="http://twitter.github.com/bootstrap/1.4.0/bootstrap.min.css" />
    <!-- link rel="stylesheet" href="/css/main.css" / -->
    <script type="text/javascript" src="http://use.typekit.com/wvj7lcm.js"></script>
    <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
    <link rel="stylesheet/less" type="text/css" href="/css/main.less" />
    <script src="/js/less-1.1.3.min.js" type="text/javascript"></script>
    <title>unpluggd, the personal blog of Phillip B Oldham</title>

  </head>
  <body>
        <header class="container">
      <div class="row">
        <h1 class="span11">unpluggd</h1> 
        <p class="span5">
          <span class="hidden">unpluggd</span> is the personal 
          blog of <span class="nowrap">Phillip Oldham</span>, 
          a Python developer living in Leeds, UK.
        </p>
      </div>
    </header>

    <article id="main" class="container">
      <h2>Fixing "InnoDB is in the future!" errors</h2>
      <p>Often, when the MySQL server crashes, the InnoDB log and tables loose their synchronisation and start issuing lines similar to the following to the error log:</p>

<pre><code>090216  7:01:04  InnoDB: Error: page 51 log sequence number 1209237857
InnoDB: is in the future! Current system log sequence number 1209236508.
InnoDB: Your database may be corrupt or you may have copied the InnoDB
InnoDB: tablespace but not the InnoDB log files. See
InnoDB: http://dev.mysql.com/doc/refman/5.1/en/forcing-recovery.html
InnoDB: for more information.
</code></pre>

<p>I've found the quickest way to fix this is to use mysqldump to get a snapshot of your DB, drop the DB, and recreate it using the dump. As a manual process (using tools such as phpMyAdmin or Navicat) this can be quite slow, but from the unix commandline you can issue the instructions in a couple of lines:</p>

<pre><code># mysql -e "CREATE DATABASE tmp_db;" &amp;&amp; mysqldump -Ccq old_db | mysql tmp_db
# mysql -e "DROP DATABASE old_db;" 
# mysql -e "CREATE DATABASE new_db;" &amp;&amp; mysqldump -Ccq tmp_db | mysql new_db
</code></pre>

<p>You'll need to remember to include other options, but the main guts are there.</p>

    </article>
    <footer class="container">
      <section id="posts" class="container">
  <h3 class="span16">Recent Posts</h3>
  
  <div class="row">
    <h4 class="span5"><a href="/2010/06/23/user-agent-string-for-ipad-s-media-player-app.html">User Agent String for iPad's Media Player app</a></h4>
    <p class="span11">Just in case you were wondering what the user-agen... <a href="/2010/06/23/user-agent-string-for-ipad-s-media-player-app.html">read more</a></p>
  </div>
  
  <div class="row">
    <h4 class="span5"><a href="/2010/06/02/compiling-lxml-libxml2-libxslt-for-a-virtualenv.html">Compiling lxml/libxml2/libxslt for a virtualenv</a></h4>
    <p class="span11">Sometimes you need to ensure `lxml` is using the l... <a href="/2010/06/02/compiling-lxml-libxml2-libxslt-for-a-virtualenv.html">read more</a></p>
  </div>
  
  <div class="row">
    <h4 class="span5"><a href="/2010/04/30/mysql-the-libtoolt-error-on-x86-64.html">MySQL & the libtoolT error on x86_64</a></h4>
    <p class="span11">Quick fix for the `cannot remove 'libtoolT': No su... <a href="/2010/04/30/mysql-the-libtoolt-error-on-x86-64.html">read more</a></p>
  </div>
  
  <p class="span16">View more <a href="/archive.html">posts</a>.</p>
</section>

            <div id="projects">
        <h3>Projects</h3>
        <div class="row">
          <h4 class="span5">FWRD</h4>
          <p class="span11">FWRD is a Python Micro-Framework designed to GetOutOfTheWay.</p>
          <p class="span11">
            <a href="//github.com/unpluggd/FWRD">View this project on GitHub</a>
            <a href="/FWRD">Documentation</a>
          </p>
        </div>
        <div class="row">
          <h4 class="span5">PySO8601</h4>
          <p class="span11">A better ISO8601 module for Python.</p>
          <p class="span11">
            <a href="//github.com/unpluggd/PySO8601">View this project on GitHub</a>
            <a href="/PySO8601">Documentation</a>
          </p>
        </div>
        <div class="row">
          <h4 class="span5">exemelopy</h4>
          <p class="span11">A module for encoding Python data types as XML.</p>
          <p class="span11">
            <a href="//github.com/unpluggd/exemelopy">View this project on GitHub</a>
            <a href="/exemelopy">Documentation</a>
          </p>
        </div>
        <div class="row">
          <p class="span11 offset5">View my other <a href="//github.com/unpluggd" target="_blank">GitHub projects</a>.</p>
        </div>
      </div>

      <div class="row">
<p>&#169; 2009-2011 Phillip B Oldham.</p>
</div>

    </footer>
  </body>
</html>
