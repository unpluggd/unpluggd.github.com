<!DOCTYPE html>
<html>
  <head>
        <!--link rel="stylesheet" href="/fonts/junction-regular-fontfacekit/stylesheet.css" />
    <link rel="stylesheet" href="/fonts/League-Gothic-fontfacekit/stylesheet.css" />
    <link rel="stylesheet" href="/fonts/M-1m-fontfacekit/stylesheet.css" / -->
    <link rel="stylesheet" href="/css/reset.css" />
    <link rel="stylesheet" href="/css/main.css" />
    <link rel="stylesheet" href="/css/pygments-native.css" />
    <!-- link rel="stylesheet/less" type="text/css" href="/less/main.less" /-->
    <!-- script src="/js/less-1.1.3.min.js" type="text/javascript"></script -->

  </head>
  <body>
    <header>
      <h1>unpluggd</h1> is the personal blog of Phillip Oldham, 
      a Python developer living in Leeds, UK.
    </header>
    <article id="main">
      <h2>Nginx, Subversion, and 413's</h2>
      <p>At work I spent some time migrating our subversion repository off-site. I also took the opportunity to tidy up some of the setup, install <a href="http://trac.edgewall.org/">trac</a> and create some repos for unversioned projects.</p>

<p>While pushing one of these unversioned projects, I started seeing "413 - Request entity too large" errors which would then kill the commit at that point. The setup was the same as any other nginx+svn install; nginx proxies to apache+mod_svn. I checked the SVN docs without success, however some google-fu revealed that this was an error with the "LimitRequestBody" option in apache.</p>

<p>The problem was, I hadn't set that option. It wasn't anywhere in the config files. Thinking there might be a very low default value I set it manually to 2Gb and tried again.</p>

<p>413... Fail.</p>

<p>More google-fu... Fail.</p>

<p>A few days later I was setting up a new CentOS server with nginx, php, mysql, et al. Since there was a new version of nginx released I spent a few moments reviewing the wiki to see what the changes were, and that's when I came across the <strong>client_max_body_size</strong> directive. From the docs:</p>

<blockquote><p>Directive assigns the maximum accepted body size of client request, indicated by the line "Content-Length" in the header of request.</p>

<p>If size is greater the given one, then the client gets the error "Request Entity Too Large" (413).</p>

<p>It is necessary to keep in mind that the browsers do not know how to correctly show this error.</p></blockquote>

<p>It hadn't occurred to me that nginx would be the issue. The default is a measly 1Mb. Fine if you're being sent simple http requests, rubbish for large uploads like the kind the svn client sends.</p>

<p>Setting "client_max_body_size 1024m;" in the vhost fixed it.</p>

    </article>
    <footer>
            <div id="posts">
        <h3>Recent Posts</h3>
        <div>
          
          <h4><a href="/2010/06/23/user-agent-string-for-ipad-s-media-player-app.html">User Agent String for iPad's Media Player app</a></h4>
          <p></p>
          
          <h4><a href="/2010/06/02/compiling-lxml-libxml2-libxslt-for-a-virtualenv.html">Compiling lxml/libxml2/libxslt for a virtualenv</a></h4>
          <p></p>
          
          <h4><a href="/2010/04/30/mysql-the-libtoolt-error-on-x86-64.html">MySQL & the libtoolT error on x86_64</a></h4>
          <p></p>
          
        </div>
        <p>View more <a href="/archive.html">posts</a>.</p>
      </div>

            <div id="projects">
        <h3>Projects</h3>
        <div>
          <h4>FWRD</h4>
          <p>FWRD is a Python Micro-Framework designed to GetOutOfTheWay.</p>
          <p>
            <a href="//github.com/unpluggd/FWRD">View this project on GitHub</a>
            <a href="/FWRD">Documentation</a>
          </p>
        </div>
        <div>
          <h4>PySO8601</h4>
          <p>A better ISO8601 module for Python.</p>
          <p>
            <a href="//github.com/unpluggd/PySO8601">View this project on GitHub</a>
            <a href="/PySO8601">Documentation</a>
          </p>
        </div>
        <div>
          <h4>exemelopy</h4>
          <p>A module for encoding Python data types as XML.</p>
          <p>
            <a href="//github.com/unpluggd/exemelopy">View this project on GitHub</a>
            <a href="/exemelopy">Documentation</a>
          </p>
        </div>
        <p>View my other <a href="//github.com/unpluggd" target="_blank">GitHub projects</a>.</p>
      </div>

    </footer>
  </body>
</html>
